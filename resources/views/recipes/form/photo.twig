{% if key is not defined %}
    {% set key = 0 %}
{% endif %}

<div class="form-row photo">
    <div class="col-md-12">
        <div class="form-row mb-2">
            <div class="col-md-11">
                {% set placeholder = 'Add Photo (Optional)' %}
                {% if photo.path is not empty %}
                    {% set placeholder = photo.path %}
                    {{ form.hidden( 'photos[' ~ key ~ '][path]', old( 'photos[' ~ key ~ '][path]', photo.path ), { class: 'path' } ) }}
                {% endif %}
                {{ form.file( 'photos[' ~ key ~ '][photo]', '', 'custom-file-input recipe-photo', placeholder, false, { disabled: ( photo.path is not empty ? true : false ) } ) }}
                {{ form.hidden( 'photos[' ~ key ~ '][type]', old( 'photos[' ~ key ~ '][type]', 'photo' ), { class: 'type' } ) }}
                {{ form.hidden( 'photos[' ~ key ~ '][id]', old( 'photos[' ~ key ~ '][id]', photo.id ), { class: 'id' } ) }}
                {{ form.hidden( 'photos[' ~ key ~ '][order_number]', old( 'photos[' ~ key ~ '][order_number]', photo.order_number ), { class: 'order-number' } ) }}
            </div>
            <div class="col-md-1 pl-1 pr-1">
                <span class="btn btn-light sort-item w-100">&#9776;</span>
            </div>
        </div>
        <div class="form-row mb-2">
            <div class="col-md-11">
                {{ form.textarea( 'photos[' ~ key ~ '][caption]', old( 'photos[' ~ key ~ '][caption]', photo.caption ), '', 'photo-caption', 'Photo Caption', false, 2 ) }}
            </div>
            <div class="col-md-1 pl-1 pr-1">
                <span class="btn btn-danger remove-item w-100" data-row="{{ key }}">X</span>
            </div>
        </div>
    </div>
</div>
